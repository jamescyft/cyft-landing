<!DOCTYPE html>
<html>
<head>
    <title>CSP Eval Test</title>
    <meta charset="UTF-8">
</head>
<body>
    <h1>CSP Eval Test</h1>
    <div id="results"></div>
    
    <script>
        const results = document.getElementById('results');
        
        // Test 1: Direct eval
        try {
            const result1 = eval('2 + 2');
            results.innerHTML += '<p style="color: green;">✓ eval() works: 2 + 2 = ' + result1 + '</p>';
        } catch (e) {
            results.innerHTML += '<p style="color: red;">✗ eval() blocked: ' + e.message + '</p>';
        }
        
        // Test 2: new Function
        try {
            const fn = new Function('return 3 + 3');
            const result2 = fn();
            results.innerHTML += '<p style="color: green;">✓ new Function() works: 3 + 3 = ' + result2 + '</p>';
        } catch (e) {
            results.innerHTML += '<p style="color: red;">✗ new Function() blocked: ' + e.message + '</p>';
        }
        
        // Listen for CSP violations
        document.addEventListener('securitypolicyviolation', (e) => {
            results.innerHTML += '<p style="color: orange;">⚠️ CSP Violation: ' + e.violatedDirective + '</p>';
        });
    </script>
</body>
</html> 